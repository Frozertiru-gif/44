function hashSlug(slug: string) {
  return Array.from(slug).reduce((acc, char, index) => acc + char.charCodeAt(0) * (index + 1), 0);
}

export function buildGeoCopy(geoName: string, slug: string): {
  titleLead: string;
  bullets: string[];
  body: string[];
  cta: string;
} {
  const hash = hashSlug(slug);

  const titleLeadVariants = [
    `В ${geoName} чаще всего обращаются, когда техника резко перестаёт работать в самый неудобный момент: перед учёбой, отчётами или семейными делами. Я выезжаю на дом, провожу диагностику и сразу объясняю, что можно восстановить на месте без лишних расходов.`,
    `Жителям ${geoName} важно получать ремонт без долгих ожиданий и непонятных наценок. На выезде проверяю технику по шагам, называю реальную причину поломки и предлагаю понятный вариант решения под ваш бюджет и срок.`,
    `Для клиентов в ${geoName} делаю упор на практичный ремонт: быстро найти источник неисправности, вернуть рабочее состояние и не навязывать замену исправных деталей. Все ключевые действия согласовываются до начала работ.`
  ];

  const bulletSets = [
    [
      `Выезд в ${geoName} в удобный для вас интервал, включая вечерние часы.`,
      "Диагностика и объяснение причины неисправности простыми словами.",
      "Согласование стоимости до начала ремонта, без скрытых пунктов.",
      "Работа с ПК, ноутбуками, ТВ, принтерами и смартфонами.",
      "Рекомендации по профилактике после завершения работ."
    ],
    [
      `Работаю по заявкам из ${geoName} без колл-центров и посредников.`,
      "Оцениваю, что нужно делать срочно, а что можно отложить.",
      "Помогаю восстановить настройки и данные после сбоев.",
      "Привожу базовые расходники и инструменты для типовых случаев.",
      "После ремонта остаюсь на связи по вопросам эксплуатации."
    ],
    [
      `В ${geoName} можно оформить вызов по телефону или через форму на сайте.`,
      "Проверяю технику на месте и показываю результат перед оплатой.",
      "Даю честную обратную связь: ремонт целесообразен или нет.",
      "Соблюдаю аккуратность в квартире и рабочей зоне.",
      "Подсказываю, как избежать повторных сбоев в ближайшие месяцы."
    ]
  ];

  const bodyVariants = [
    [
      `На практике большинство неисправностей связано не только с износом, но и с накопленными программными ошибками, перегревом или нестабильным питанием. Поэтому сначала проверяю систему комплексно: от базовых параметров до состояния конкретных узлов. Такой подход помогает не тратить деньги на лишние замены и быстрее вернуть технику в рабочее состояние.`,
      `Если проблема требует более длительных работ, объясняю это заранее и фиксирую план действий. Вы понимаете, за что платите, какие этапы уже выполнены и какой результат ожидается после каждого шага. Это особенно важно, когда техника нужна ежедневно и нет возможности надолго остаться без неё.`
    ],
    [
      `Ремонт на дому в ${geoName} удобен тем, что вы сразу видите процесс и можете уточнить детали по ходу диагностики. Я не ограничиваюсь формальным осмотром: проверяю сопутствующие причины, которые часто приводят к повторной поломке, и предлагаю решение, рассчитанное на стабильную работу после выезда.`,
      `Для меня приоритет — восстановить технику с минимальным простоем и без "технического тумана". Все рекомендации даю понятным языком, чтобы вы могли самостоятельно контролировать состояние устройства и вовремя замечать ранние признаки новых неисправностей.`
    ],
    [
      `При обслуживании заявок из ${geoName} использую простой принцип: сначала точная диагностика, потом ремонт. Это защищает от ситуации, когда меняют деталь, а причина остаётся. По итогам осмотра вы получаете конкретные варианты с понятной разницей по срокам и стоимости.`,
      `Даже в типовых случаях проверяю дополнительные параметры: состояние охлаждения, корректность настроек, качество подключения и поведение техники под нагрузкой. Такой контроль снижает риск повторного обращения по той же проблеме и экономит ваше время в будущем.`
    ]
  ];

  const ctaVariants = [
    `Если техника в ${geoName} работает нестабильно, не откладывайте: оставьте заявку, и я подскажу оптимальный порядок действий уже на первом звонке.`,
    `Нужен аккуратный и понятный ремонт в ${geoName}? Свяжитесь со мной удобным способом — согласуем выезд и начнём с точной диагностики.`,
    `Чтобы не терять время на эксперименты, оформите обращение по ${geoName} прямо сейчас — помогу восстановить технику с прогнозируемым результатом.`
  ];

  return {
    titleLead: titleLeadVariants[hash % titleLeadVariants.length],
    bullets: bulletSets[hash % bulletSets.length],
    body: bodyVariants[hash % bodyVariants.length],
    cta: ctaVariants[hash % ctaVariants.length]
  };
}
